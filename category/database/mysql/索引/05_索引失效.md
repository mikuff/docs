
## 索引失效的场景
- 联合索引最左前缀  
- like语句  
    - like '%xxx'   
    - like '%xxx%'  
    - like 'xxx%'  
- 函数  
- mysql成功估算  


## 索引失效的原因
> **联合索引不符合最左前缀**   
> 在构建联合索引的时候,第一列是有序的,其他列是无序的。因此在使用联合索引的时候跳过第一列使用第二列索引,联合索引无效

> **like语句索引失效**    
> 字符串列在构建索引的时候,会先根据第一个字符的assic码进行比较，依次向后进行比对。因此整个B+树相对于列值从左向后是有序的。所以 like '%xxx'索引有效,其他无效

> **函数**
> 索引列在构建B+树的时候,使用的是原始值,B+树相对于原始值有序,而对于函数后计算的值是无序的，简单来说mysql不知道经过函数运算后的值。索引失效

> **mysql成功估算**
> 在整表数据量较少的，或列值的选择性较差时,mysql在进行成本估算的时候，发现走索引的成本高于全表扫描,索引失效

