## 产生背景
### 分布式ACID
到分布式场景下，ACID特性的含义会被扩展
- 原子性(Atomicity):一个事务内涉及到分布式多个节点的所有操作要么一起成功，要么一起失败
- 一致性(Consistency): 跨节点场景下也不能出现中间状态。上面转账的例子中，A和B的数据可能不在一个节点上，转账的全程依然要保持A+B都为100块，不存在其他的结果。
- 隔离性 (lsolation):一个分布式事务在一个节点的部分哪怕完成了，在整个分布式事务完成前，也不能被其他事务读取使用。
- 持久性(Durability): 事务提交完成后的数据不仅要在当前节点保存，还应该在分布式场景下有备份，具备高可用性

**从而诞生了分布式事务的概念: 分布式事务是事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于分布式系统的不同节点之上的事务。我们也可以把分布式事务定义成能保证分布式ACID特性的事务**

### 早期实践
分布式事务的需求产生后，人们对其进行了一些探索，我们通过一个电商交易的例子来简单说明一下: 
考虑电子商务的下单->支付->确认->发货->物流->确认收货->交易完成的交易流程，如图3-1，整个交易要保证ACID特性，所以是一个事务。而整个交易流程太长，往往在实现中会拆分成多个系统，如拆成订单系统、仓库系统、物流系统，每个系统都可能有独自的数据库(分库)，那么这就成为了一个分布式事务

![](./img/%E7%94%B5%E5%95%86%E4%BA%8B%E5%8A%A1.png)

> 如果没有分布式事务的设计，那么会产生问题: 如果仓库库存不足、快递丢失或者系统故障，都会导致交易失败，应该回滚，但订单系统的下单支付事务已经完成，在其数据库中完成提交，已经无法回滚。因此分布式事务一般有三个解决方向：
- 两阶段提交/XA事务模型
- TCC事务模型
- Saga事务模型